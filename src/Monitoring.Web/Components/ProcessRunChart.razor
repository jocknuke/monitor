@namespace Monitoring.Web.Components
@using System.Collections.Generic
@using MudBlazor

<!--
    ProcessRunChart renders a simple line chart showing run durations for a
    batch process.  Rather than using Plotly.Blazor (which adds extra
    dependencies), this component uses the MudBlazor MudChart component.
    The Labels and Series properties map the durations to chart data.
-->

<MudChart ChartType="ChartType.Line" Labels="@Labels" ChartSeries="@Series" />

@code {
    /// <summary>
    /// Durations (in minutes) to plot.  Each entry corresponds to a single
    /// execution of the process and should be ordered chronologically.
    /// </summary>
    [Parameter] public IEnumerable<double> Durations { get; set; } = Array.Empty<double>();

    // Generate labels 1..N for each duration value.
    private string[] Labels => Durations.Select((d, i) => (i + 1).ToString()).ToArray();

    // Single series representing the durations.  ChartSeries.Data expects double[]
    private List<ChartSeries> Series => new()
    {
        new ChartSeries { Name = "Duration", Data = Durations.Select(d => (double)d).ToArray() }
    };
}